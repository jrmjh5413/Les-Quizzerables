<!DOCTYPE html>
<html>
<head>
    <title>Presenter View</title>
    <style>body { font-family: sans-serif; text-align: center; }</style>
</head>
<body>
    <h1>Your Room Code: <span id="room-code" style="color: blue;"></span></h1>
    <h2 id="question"></h2>
    <div id="results"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const roomCodeEl = document.getElementById('room-code');
        const questionEl = document.getElementById('question');
        const resultsEl = document.getElementById('results');

        // Automatically ask the server to create a room when the page loads
        socket.emit('create_room');

        socket.on('room_created', ({ roomCode, pollData }) => {
            roomCodeEl.textContent = roomCode;
            updateDisplay(pollData);
        });

        socket.on('update', (pollData) => {
            updateDisplay(pollData);
        });

        function updateDisplay(pollData) {
            questionEl.textContent = pollData.question;
            resultsEl.innerHTML = '';
            for (const [option, votes] of Object.entries(pollData.options)) {
                resultsEl.innerHTML += `<div>${option}: ${votes}</div>`;
            }
        }
    </script>
</body>
</html>
